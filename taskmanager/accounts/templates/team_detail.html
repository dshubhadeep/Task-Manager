{% extends 'base_layout.html' %}
{% load static %}

{% block extrahead %}
    <script src="{% static 'main.js' %}"></script>
{% endblock %}

{% block content %}

    {% include "navbar.html" %}

    <div class="container">
        <h1 class="title has-text-centered" style="margin-top:15px;">{{ team.team_name }}</h1>
        <hr>

        <div class="columns">
            <!-- Tasks section -->
            <div class="column is-6">
                <h1 class="title is-4">Tasks</h1>
                <hr>
            </div>
            <div class="column"></div>
            <!-- Members section-->
            <div class="column is-3">
                <h1 class="title is-4">Members</h1>
                <hr>
                <ul>
                    {% for member in team.members.all %}
                        <li class="subtitle is-6" style="margin-bottom:10px;">
                            <b>{{ forloop.counter }}. {{ member | title }}
                                {% if team.created_by == member %}
                                    <span class="tag is-info">Admin</span>
                                {% endif %}
                            </b>
                        </li>
                    {% endfor %}
                </ul>
                <!-- TODO Add edit member url to form -->

                <form action="{% url 'accounts:add_team_member' %}" method="POST" style="margin-top: 20px;">
                    {% csrf_token %}
                    <input type="hidden" name="team_id" value="{{ team.id }}">
                    <div class="field">
                        <label class="label" for="members">Add Members</label>
                        <div class="select is-multiple is-fullwidth">
                            <select name="members" id="members" multiple>
                                {% for user in users %}
                                    {% if user not in team.members.all %}
                                        <option value="{{ user }}">{{ user|title }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div style="text-align:center;margin-top:120px;">
                        <input class="button is-small is-primary is-outlined" type="submit" value="Add">
                    </div>
                </form>

            </div>
        </div>
    </div>

{% endblock %}